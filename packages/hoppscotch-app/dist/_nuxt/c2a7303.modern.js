(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{2252:function(t,n,e){"use strict";e.r(n);var i=e(13),o=(e(64),e(330),e(2)),c=e(16),s=e(66),a=e(18),r=Object(o.c)({props:{show:Boolean},setup(){var{subscribeToStream:t}=Object(a.i)();return{subscribeToStream:t}},data:()=>({form:{email:""},signingInWithGoogle:!1,signingInWithGitHub:!1,signingInWithMicrosoft:!1,signingInWithEmail:!1,mode:"sign-in"}),mounted(){this.subscribeToStream(c.c,(t=>{t&&this.hideModal()}))},methods:{showLoginSuccess(){this.$toast.success("".concat(this.$t("auth.login_success")))},signInWithGoogle(){var t=this;return Object(i.a)((function*(){t.signingInWithGoogle=!0;try{yield Object(c.o)(),t.showLoginSuccess(),t.$router.push("/")}catch(o){if(console.error(o),"auth/account-exists-with-different-credential"===o.code){var n=o.credential;t.$toast.info("".concat(t.$t("auth.account_exists")),{duration:0,closeOnSwipe:!1,action:{text:"".concat(t.$t("action.yes")),onClick:(e=Object(i.a)((function*(e,i){var{user:o}=yield Object(c.n)();yield Object(c.h)(o,n),t.showLoginSuccess(),i.goAway(0)})),function(t,n){return e.apply(this,arguments)})}})}else t.$toast.error("".concat(t.$t("error.something_went_wrong")))}var e;t.signingInWithGoogle=!1}))()},signInWithGithub(){var t=this;return Object(i.a)((function*(){t.signingInWithGitHub=!0;try{var n=yield Object(c.n)(),e=Object(c.e)(n).accessToken;Object(c.m)(n.providerId,e),t.showLoginSuccess()}catch(n){if(console.error(n),"auth/account-exists-with-different-credential"===n.code){var o=n.credential;t.$toast.info("".concat(t.$t("auth.account_exists")),{duration:0,closeOnSwipe:!1,action:{text:"".concat(t.$t("action.yes")),onClick:(s=Object(i.a)((function*(n,e){var{user:i}=yield Object(c.o)();yield Object(c.h)(i,o),t.showLoginSuccess(),e.goAway(0)})),function(t,n){return s.apply(this,arguments)})}})}else t.$toast.error("".concat(t.$t("error.something_went_wrong")))}var s;t.signingInWithGitHub=!1}))()},signInWithMicrosoft(){var t=this;return Object(i.a)((function*(){t.signingInWithMicrosoft=!0;try{yield Object(c.p)(),t.showLoginSuccess()}catch(o){if(console.error(o),"auth/account-exists-with-different-credential"===o.code){var n=o.credential;t.$toast.info("".concat(t.$t("auth.account_exists")),{duration:0,closeOnSwipe:!1,action:{text:"".concat(t.$t("action.yes")),onClick:(e=Object(i.a)((function*(e,i){var{user:o}=yield Object(c.n)();yield Object(c.h)(o,n),t.showLoginSuccess(),i.goAway(0)})),function(t,n){return e.apply(this,arguments)})}})}else t.$toast.error("".concat(t.$t("error.something_went_wrong")))}var e;t.signingInWithMicrosoft=!1}))()},signInWithEmail(){var t=this;return Object(i.a)((function*(){t.signingInWithEmail=!0;var n={url:"".concat("https://postwoman.strativ-support.se","/enter"),handleCodeInApp:!0};yield Object(c.q)(t.form.email,n).then((()=>{t.mode="email-sent",Object(s.c)("emailForSignIn",t.form.email)})).catch((n=>{console.error(n),t.$toast.error(n.message),t.signingInWithEmail=!1})).finally((()=>{t.signingInWithEmail=!1}))}))()},hideModal(){this.mode="sign-in",this.$toast.clear(),this.$emit("hide-modal")}}}),l=r,h=e(15),u=Object(h.a)(l,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return"sign-in"===t.mode?e("div",{staticClass:"flex flex-col px-2 space-y-2"},[e("SmartItem",{attrs:{loading:t.signingInWithGoogle,svg:"auth/google",label:""+t.$t("auth.continue_with_google")},nativeOn:{click:function(n){return t.signInWithGoogle.apply(null,arguments)}}})],1):t._e()}),[],!1,null,null,null);n.default=u.exports;installComponents(u,{SmartItem:e(104).default})}}]);